<!DOCTYPE html>
<html>

<head>
    <title>Games</title>
    <link rel="icon" href="/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/text/css/wicons.css">
    <link rel="stylesheet" href="/assets/text/css/global.css">
    <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>
    <script src="/assets/text/js/setnavandfooter.js"></script>
    <style>
        /* Scaling factor for better responsiveness */
        :root {
            --scale-factor: 1;
            /* Default scale */
            --font-size: calc(16px * var(--scale-factor));
            --image-size: calc(80px * var(--scale-factor));
        }

        /* Media query to adjust scale based on screen size */
        @media screen and (max-width: 800px) {
            :root {
                --scale-factor: 0.9;
            }
        }

        @media screen and (max-width: 480px) {
            :root {
                --scale-factor: 0.75;
            }
        }

        body {
            background: var(--background);
            margin: 0;
            font-family: "Inter";
            color: var(--text);
            font-size: var(--font-size);
        }

        .wrap {
            height: 100vh;
            width: 100vw;
            background: var(--background);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            flex-direction: column;
            text-align: center;
        }

        .scroll {
            width: 75%;
            height: calc(100% - 130px);
            overflow-y: scroll;
            overflow-x: hidden;
            border-left: 1px solid #ffffff66;
            border-right: 1px solid #ffffff66;
        }

        .game {
            height: 100px;
            width: 100%;
            display: flex;
            align-items: center;
            border-bottom: 1px dashed var(--text-dull);
        }

        .game img {
            height: var(--image-size);
            width: var(--image-size);
            margin: 10px;
            border-radius: 8px;
            box-shadow: 0 0 8px currentColor;
        }

        .game p {
            margin: 0;
            font-size: 18px;
            font-weight: 400;
            text-shadow: 0 0 8px currentColor;
            text-align: right;
        }

        .game button {
            height: var(--button-size);
            width: 80px;
            background: var(--background-light);
            color: var(--text);
            border: none;
            margin-right: 10px;
            margin-left: auto;
            text-shadow: 0 0 4px currentColor;
            transition: text-shadow 0.2s ease-in-out;
        }

        .game button:hover {
            cursor: pointer;
            text-shadow: 0 0 15px currentColor;
        }

        .game button.disabled {
            background: var(--dark);
            color: var(--text-dull);
        }

        .game button.disabled:hover {
            cursor: default;
            background: var(--dark);
            text-shadow: 0 0 4px currentColor;
        }

        #searchbar {
            height: 30px;
            width: 60%;
            padding: 0 8px;
            margin-bottom: 10px;
            background: none;
            border: 2px solid var(--background-light);
            border-radius: 8px;
            color: var(--text);
            font-family: "Inter";
        }

        #searchbar:focus {
            outline: none;
            box-shadow: 0 0 8px var(--text-dull);
        }

        @media screen and (max-width: 8in) {
            #wr {
                font-size: 60px;
            }
        }

        @media screen and (max-width: 5in) {
            #wr {
                font-size: 35px;
            }

            .wrc {
                height: 300px;
            }
        }
    </style>
</head>

<body>
    <button id="smallnavbtn" onclick="toggleSideNav()"><i class="wicon wicon-bar-menu" id="snbtnsub"></i></button>
    <nav id="navm">
        <!-- js! -->

    </nav>
    <nav id="sidenav">
        <!-- js! -->
    </nav>

    <div class="wrap">
        <input placeholder="Search..." id="searchbar" type="text">
        <div class="scroll">
            <div class="game" data-name="monkeymart">
                <img src="https://dlcasto5.github.io/monkeymart/logo.png">
                <p>monkeymart<br><span style="color: lime; font-size: 14px;">newest</span>
                </p><button onclick="launchGame('monkey mart', 'monkeymart')">Launch</button>
            </div>
            <div class="game" data-name="weave silk">
                <img src="https://dlcasto5.github.io/weavesilk/logo.png">
                <p>weavesilk<br>
                </p><button onclick="launchGame('weave silk', 'weavesilk')">Launch</button>
            </div>
            <div class="game" data-name="break lock">
                <img src="https://dlcasto5.github.io/breaklock/logo.png">
                <p>android pin</p>
                <button onclick="launchGame('android pin', 'breaklock')">Launch</button>
            </div>                
            <div class="game" data-name="cell machine">
                <img src="https://dlcasto5.github.io/game/cell-machine/logo.png">
                <p>cell-machine</p>
                <button onclick="launchGame('cell machine', 'game/cell-machine')">Launch</button>
            </div>
            <div class="game" data-name="slope">
                <img src="https://dlcasto5.github.io/game/slope/logo.png">
                <p>slope</p>
                <button onclick="launchGame('slope', 'game/slope')">Launch</button>
            </div>
            <div class="game" data-name="doge miner">
                <img src="https://dlcasto5.github.io/game/doge-miner/favicon.ico">
                <p>doge miner</p>
                <button onclick="launchGame('doge miner', 'game/doge-miner')">Launch</button>
            </div>
            <div class="game" data-name="retro bowl">
                <img src="https://dlcasto5.github.io/game/retro-bowl/logo.png">
                <p>retro bowl</p>
                <button onclick="launchGame('retro bowl', 'game/retro-bowl')">Launch</button>
            </div>
            <div class="game" data-name="doom">
                <img src="https://dlcasto5.github.io/game/doom/logo.png">
                <p>doom</p>
                <button onclick="launchGame('doom', 'game/doom')">Launch</button>
            </div>
            <div class="game" data-name="there is no game">
                <img src="https://dlcasto5.github.io/game/there-is-no-game/logo.png">
                <p>no game</p>
                <button onclick="launchGame('there is no game', 'game/there-is-no-game')">Launch</button>
            </div>
            <div class="game" data-name="chrome dino">
                <img src="https://dlcasto5.github.io/game/chrome-dino/logo.png">
                <p>chrome dino<br></p>
                <button onclick="launchGame('chrome dino', 'game/chrome-dino')">Launch</button>
            </div>
            <div class="game" data-name="mc">
                <img src="/assets/image/game/mc.png">
                <p>minecraft 1.8.8</p>
                <button onclick="launchGame('mc', 'mc')">Launch</button>
            </div>
            <div class="game" data-name="clash of tanks">
                <img src="https://th.bing.com/th?id=OIP.zgWY2nMDD_yHPigvh6JbDQHaHa&w=80&h=80&c=1&vt=10&bgcl=899312&r=0&o=6&pid=5.1">
                <p>clash of tanks</p>
                <button onclick="launchGame('clash of tanks', 'clashoftanks')">Launch</button>
                <div class="game" data-name="run 3">
            </div>
            <div class="game" data-name="run3">
                <img src="https://th.bing.com/th?id=OIP.Ct5QSUXUXiDL6VQ2iEeIVwAAAA&w=80&h=80&c=1&vt=10&bgcl=ea877f&r=0&o=6&pid=5.1">
                <p>Run 3</p>
                <button onclick="launchGame('run 3', 'run3')">Launch</button>
            </div>
            <div class="game" data-name="tiny fishing">
                <img src="https://th.bing.com/th?id=OIP.HLJslfR0_lbmrAaR9x2VDgHaHa&w=80&h=80&c=1&vt=10&bgcl=74d664&r=0&o=6&pid=5.1">
                <p>tiny fishing</p>
                <button onclick="launchGame('tiny fishing', 'tinyfishing')">launch</button>
            </div>
            <div class="game" data-name="cookie clicker">
                <img src="/assets/image/game/cookieclicker.png">
                <p>cookieclicker</p>
                <button onclick="launchGame('cookie clicker', 'cookieclicker')">Launch</button>
            </div>
            <div class="game" data-name="xx142b2.exe">
                <img src="/assets/image/game/xx142-b2exe.png">
                <p>xx142-b2exe</p>
                <button onclick="launchGame('xx142b2.exe', 'xx142-b2exe')">Launch</button>
            </div>
            <div class="game" data-name="funkin">
                <img src="/assets/image/game/funkin.png">
                <p>funkin</p>
                <button onclick="launchGame('funkin', 'funkin')">Launch</button>
            </div>
            <div class="game" data-name="idle light city">
                <img src="/assets/image/game/idlelightcity.png">
                <p>idle light city</p>
                <button onclick="launchGame('idle light city', 'idlelightcity')">Launch</button>
            </div>
            <div class="game" data-name="fruit ninja">
                <img src="https://th.bing.com/th?id=OIP.v2vBzMN4-oDhz3foT2QzDQHaHa&w=100&h=100&c=8&rs=1&qlt=90&o=6&pid=3.1&rm=2">
                <p>fruit ninja</p>
                <button onclick="launchGame('fruit ninja', 'fruitninja')">Launch</button>
            </div>
            <div class="game" data-name="drift boss">
                <img src="/assets/image/game/driftboss.png">
                <p>driftboss</p>
                <button onclick="launchGame('drift boss', 'driftboss')">Launch</button>
            </div>
            <div class="game" data-name="particleclicker">
                <img src="/assets/image/game/particleclicker.png">
                <p>particle clicker</p>
                <button onclick="launchGame('particle clicker', 'particleclicker')">Launch</button>
            </div>
            <div class="game" data-name="Snow Rider 3D">
                <img src="/assets/image/game/snowrider3d.png">
                <p>Snow Rider 3D</p>
                <button onclick="launchGame('Snow Rider 3D', 'snowrider3d')">Launch</button>
            </div>
            <div class="game" data-name="Idle Breakout">
                <img src="/assets/image/game/idlebreakout.png">
                <p>Idle Breakout</p>
                <button onclick="launchGame('Idle Breakout', 'idlebreakout')">Launch</button>
            </div>
            <div class="game" data-name="Bitlife Bit Life">
                <img src="/assets/image/game/bitlife.png">
                <p>Bitlife</p>
                <button onclick="launchGame('Bitlife', 'bitlife')">Launch</button>
            </div>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSdudDDIeRqwU1cvgQUMZs0lbkLxXz5l-zKuRc3Q1G0inxfRXQ/viewform?usp=sf_link" style="color: var(--text); font-size: 13px;">Game Request Form</a>
            <br><span style="color: var(--text); font-size: 13px;">Joke requests will not be tolerated. If Joke requests are made, your future requests will be ignored.</span>
        </div>
    </div>

    <footer id="footer">
        <!-- js! -->
    </footer>

    <script>
        const searchbar = document.getElementById('searchbar');
        const games = document.getElementsByClassName('game');

        searchbar.addEventListener('input', (event) => {
            const query = event.target.value.toLowerCase();

            for (const game of games) {
                const name = game.getAttribute('data-name').toLowerCase();
                if (name.includes(query)) {
                    game.style.display = 'flex';
                } else {
                    game.style.display = 'none';
                }
            }
        });

        // Improved error handling and dynamic scaling on small devices
        function launchGame(name, id) {
            // Open a new blank tab
            const newTab = window.open('about:blank', '_blank');

            if (!newTab) {
                alert("Failed to open a new tab. Please check your browser's pop-up blocker settings.");
                return;
            }

            const loadingScreen = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Loading ${name}</title>
                        <style>
                            body {
                                background: #101010;
                                color: #00ff00;
                                font-family: 'Pixelify Sans', sans-serif;
                                text-align: center;
                                margin-top: 20vh;
                            }
                        </style>
                    </head>
                    <body>
                        <h1>Loading ${name}...</h1>
                        <p>Please wait while we launch the game.</p>
                    </body>
                    </html>
                `;

            newTab.document.open();
            newTab.document.write(loadingScreen);
            newTab.document.close();

            // Redirect after a delay
            setTimeout(() => {
                newTab.location.href = `/${id}`;
            }, 2000);
        }
    </script>
    <script>
        var STATUS = "MAJOR CHANGES";
        var sidenav = document.getElementById("sidenav");
        var snbtn = document.getElementById("smallnavbtn");
        var snbtnsub = document.getElementById("snbtnsub");
        sidenav.style.left = "-200px";

        function toggleSideNav() {
            if (sidenav.style.left == "-200px") {
                sidenav.style.left = "0";
                snbtnsub.classList.remove("wicon-bar-menu");
                snbtnsub.classList.add("wicon-xmark");
                snbtn.style.left = "140px";
                document.addEventListener("click", function(event) {
                    if (!sidenav.contains(event.target) && !snbtn.contains(event.target)) {
                        sidenav.style.left = "-200px";
                        snbtnsub.classList.add("wicon-bar-menu");
                        snbtnsub.classList.remove("wicon-xmark");
                        snbtn.style.left = "0";
                        document.removeEventListener("click");
                    }
                });
            } else {
                sidenav.style.left = "-200px";
                snbtnsub.classList.add("wicon-bar-menu");
                snbtnsub.classList.remove("wicon-xmark");
                snbtn.style.left = "0";
                document.removeEventListener("click");
            }
        }
        async function updateStatus(elem) {
            var col;
            if (STATUS == "RENNOVATION") {
                col = "#ffd300";
            } else if (STATUS == "STABLE") {
                col = "#00b4d8";
            } else if (STATUS == "MEWO") {
                col = "#7600bc";
            } else if (STATUS == "MAJOR CHANGES") {
                col = "#1efc04";
            } else if (STATUS == "BLOCKED") {
                col = "#ef4060";
            } else {
                STATUS = "ERROR";
                col = "#ff4444";
            }
            elem.innerHTML = "Status: <span style='color: " + col + "; text-shadow: 0px 0px 10px " + col + "'>" + STATUS + "</span>";
        }

        function cloakTab() {
            if (localStorage.getItem("wcCloak")) {
                var a = localStorage.getItem("wcCloak").split(", ");
                document.head.title = a[1];
                var favicon = document.querySelector("link[rel~='icon']");
                if (!favicon) {
                    favicon = document.createElement('link');
                    favicon.rel = 'icon';
                    document.head.appendChild(favicon);
                }
                favicon.href = a[2];
            } else {
                return;
            }
        }
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("footerYear").innerText = new Date().getFullYear();
            updateStatus(document.getElementById("status"));
            cloakTab();
        });
    </script>
</body>

</html>
